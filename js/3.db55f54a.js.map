{"version":3,"file":"js/3.db55f54a.js","mappings":"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","sources":["webpack://crm-course/./src/views/CategoriesPage.vue","webpack://crm-course/./src/components/Categories/CreateCategory.vue","webpack://crm-course/./src/components/Categories/CreateCategory.vue?88d1","webpack://crm-course/./src/components/Categories/EditCategory.vue","webpack://crm-course/./src/components/Categories/EditCategory.vue?3d10","webpack://crm-course/./src/views/CategoriesPage.vue?5ac7"],"sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"page-title\">\r\n      <h3>Категории</h3>\r\n    </div>\r\n    <div class=\"preloader\" v-if=\"loading\">\r\n      <base-loader></base-loader>\r\n    </div>\r\n    <div class=\"row\" v-else>\r\n      <create-category @categoryCreated=\"createdCategory\"></create-category>\r\n      <edit-category :categories=\"categories\" @categoryEdited=\"categoryEdited\" v-if=\"!editing\"></edit-category>\r\n      <base-loader v-else></base-loader>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CreateCategory from '@/components/Categories/CreateCategory.vue';\r\nimport EditCategory from '@/components/Categories/EditCategory.vue';\r\nexport default {\r\n  data() {\r\n    return {\r\n        loading: true,\r\n        categories: [],\r\n        editing: false\r\n      }\r\n  },\r\n  methods: {\r\n    async createdCategory(category) {\r\n      this.categories.push(category)\r\n    },\r\n    async categoryEdited(){\r\n      try {\r\n        this.editing = true\r\n        this.categories = await this.$store.dispatch('fetchCategories')\r\n        this.editing = false\r\n      }\r\n      catch(e) {\r\n        console.log(e)\r\n      }\r\n    }\r\n  },\r\n    async mounted() {\r\n      try {\r\n        this.categories = await this.$store.dispatch('fetchCategories')\r\n        this.loading = false\r\n      }\r\n      catch(e) {\r\n        console.log(e)\r\n      }\r\n    },\r\n    components: {\r\n     CreateCategory, EditCategory\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.content {\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n    .row {\r\n      padding-top: 20px;\r\n      gap: 20px;\r\n      max-width: 1200px;\r\n      display: flex;\r\n      flex-flow: row wrap;\r\n      justify-content: space-between;\r\n  }\r\n  .preloader{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: calc(100vh - 150px);\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"create_category\">\r\n        <div>\r\n          <div class=\"page-subtitle\">\r\n            <h2>Создать</h2>\r\n          </div>\r\n\r\n          <form @submit.prevent = \"handleCreation\">\r\n            <base-input\r\n            :class=\"{\r\n                incorrect: v$.name.$errors.length\r\n            }\"\r\n            v-model='name'\r\n            :placehldr=\"'Введите название'\"\r\n            >\r\n                Название\r\n            </base-input>\r\n\r\n            <base-input\r\n            :class=\"{\r\n                incorrect: v$.limit.$errors.length\r\n            }\"\r\n            v-model.number = 'limit'\r\n            :placehldr=\"'Введите лимит'\"\r\n            >\r\n                Лимит затрат\r\n            </base-input>\r\n\r\n            <base-button>Создать</base-button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n</template>\r\n\r\n<script>\r\nimport BaseInput from '../UI/BaseInput.vue'\r\nimport { required, minValue } from '@vuelidate/validators';\r\nimport useVuelidate from '@vuelidate/core';\r\nexport default {\r\n  components: { BaseInput },\r\n  name: 'CreateCategory',\r\n  data: () => ({\r\n    v$: useVuelidate(),\r\n    name: '',\r\n    limit: ''\r\n  }),\r\n  validations() {\r\n    return {\r\n        name: {required},\r\n        limit: {required, minValue: minValue(0.01)}\r\n    }\r\n  },\r\n  methods: {\r\n    async handleCreation() {\r\n        this.v$.$validate()\r\n        if(!this.v$.$errors.length) {\r\n            const newCat = {name: this.name, limit: this.limit}\r\n            const cat = await this.$store.dispatch('createCategory', newCat)\r\n            this.name = this.limit = ''\r\n            this.v$.$reset()\r\n            this.$emit('categoryCreated', cat)\r\n        }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .create_category {\r\n        background-color: white;\r\n        border-radius: 8px;\r\n        min-width: 325px;\r\n        border: 1px solid $light-gray;\r\n      box-shadow: 1px 10px 20px 1px $light-gray;\r\n        padding: 20px;\r\n        .page-subtitle {\r\n            height: 45px;\r\n            display: flex;\r\n        }\r\n        form {\r\n            padding-top: 48px;\r\n            display: flex;\r\n            flex-flow: column nowrap;\r\n            gap: 20px;\r\n        }\r\n    }\r\n    .incorrect {\r\n        & > input {\r\n            border-color: $error-color;\r\n        }\r\n    }\r\n</style>","import { render } from \"./CreateCategory.vue?vue&type=template&id=248166f0\"\nimport script from \"./CreateCategory.vue?vue&type=script&lang=js\"\nexport * from \"./CreateCategory.vue?vue&type=script&lang=js\"\n\nimport \"./CreateCategory.vue?vue&type=style&index=0&id=248166f0&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue\\\\crm\\\\5\\\\crm-course\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"edit_category\" :key=\"updateCount\">\r\n    <div v-if=\"categories.length\">\r\n        <div class=\"page-subtitle\">\r\n            <h2>Редактировать</h2>\r\n            <div class=\"input_field\">\r\n                <base-select\r\n                v-model=\"category\"\r\n                :options=\"mutateCategories\"\r\n                >\r\n                    Выберите категорию\r\n                </base-select>\r\n            </div>\r\n        </div>\r\n        <form @submit.prevent>\r\n            <base-input\r\n            v-model=\"name\"\r\n            :placehldr=\"'Введите название'\"\r\n            :class=\"{\r\n                incorrect: v$.name.$errors.length\r\n            }\"\r\n            >\r\n                Название\r\n            </base-input>\r\n\r\n            <base-input\r\n            v-model=\"limit\"\r\n            :placehldr=\"'Введите лимит'\"\r\n            :class=\"{\r\n                incorrect: v$.limit.$errors.length\r\n            }\"\r\n            >\r\n                Лимит\r\n            </base-input>\r\n            <div class=\"buttons\">\r\n                <base-button class=\"edit_button\" @click=\"handleEdit\">Редактировать</base-button>\r\n                <base-button class=\"delete_button\" @click=\"deleteCategory\">Удалить</base-button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div class=\"handler_categories\" v-else>\r\n        <h2>Категорий пока нет! :(</h2>\r\n        <p>Вы можете создать новую категорию, используя форму слева</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { required, minValue } from \"@vuelidate/validators\"\r\nimport useVuelidate from '@vuelidate/core'\r\nexport default {\r\n    name: \"EditCategory\",\r\n    props: ['categories'],\r\n    data() {\r\n        return {\r\n            v$: useVuelidate(),\r\n            name: '',\r\n            limit: '',\r\n            id: '',\r\n            category: '',\r\n            updateCount: 0\r\n        }\r\n    },\r\n    validations(){\r\n        return {\r\n            name: { required },\r\n            limit: { required, minValue: minValue(0.01) }\r\n        }\r\n    },\r\n    methods: {\r\n        async handleEdit() {\r\n            this.v$.$validate()\r\n                if(!this.v$.$errors.length) {\r\n                    const cat = await this.$store.dispatch('editCategory', \r\n                                            {name: this.name, limit: this.limit, id: this.id})\r\n                    this.v$.$reset()\r\n                    this.$emit('categoryEdited')\r\n            }\r\n        },\r\n        async deleteCategory(){\r\n            if(this.id) { await this.$store.dispatch('deleteCategory', this.id) }\r\n            this.$emit('categoryEdited')\r\n        }\r\n    },\r\n    computed: {\r\n      mutateCategories(){\r\n        let cat = []\r\n        this.categories.forEach(el => {\r\n          cat.push({\r\n            name: el.title,\r\n            value: el.id\r\n          })\r\n        })\r\n        return cat\r\n      }\r\n    },\r\n    watch: {\r\n        category() {\r\n            this.categories.forEach(el => {\r\n                if(el.id == this.category){\r\n                    this.name = el.title\r\n                    this.limit = el.limit\r\n                    this.id = el.id\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .edit_category {\r\n        select {\r\n            text-align: center;\r\n            cursor: pointer;\r\n            width: 200px;\r\n            height: 45px;\r\n            border-radius: 4px;\r\n            background-color: white;\r\n            color: $dark-color;\r\n            outline: none;\r\n            font-size: 16px;\r\n            transition: .3s;\r\n            border: 1px solid $light-gray;\r\n            border-radius: 4px;\r\n            box-shadow: 5px 5px 10px 1px $light-gray;\r\n            font-weight: bold;\r\n            &:focus {\r\n                border-color: $accent-color;\r\n            }\r\n        }\r\n        .page-subtitle {\r\n            display: flex;\r\n            justify-content: space-between;\r\n        }\r\n        background-color: white;\r\n        flex: 1;\r\n        border-radius: 8px;\r\n        min-width: 300px;\r\n        border: 1px solid $light-gray;\r\n        box-shadow: 1px 10px 20px 1px $light-gray;\r\n        padding: 20px;\r\n        form {\r\n            padding-top: 20px;\r\n            display: flex;\r\n            flex-flow: column nowrap;\r\n            gap: 20px;\r\n            .buttons {\r\n                display: flex;\r\n                gap: 20px;\r\n                .edit_button {\r\n                    flex: 3;\r\n                }\r\n                .delete_button {\r\n                    flex: 1;\r\n                    background-color: $error-color;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .incorrect {\r\n        & > input {\r\n            border-color: $error-color;\r\n        }\r\n    }\r\n    .handler_categories p{\r\n        padding-top: 20px;\r\n    }\r\n</style>","import { render } from \"./EditCategory.vue?vue&type=template&id=1bc37028\"\nimport script from \"./EditCategory.vue?vue&type=script&lang=js\"\nexport * from \"./EditCategory.vue?vue&type=script&lang=js\"\n\nimport \"./EditCategory.vue?vue&type=style&index=0&id=1bc37028&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue\\\\crm\\\\5\\\\crm-course\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CategoriesPage.vue?vue&type=template&id=1b67d29c&scoped=true\"\nimport script from \"./CategoriesPage.vue?vue&type=script&lang=js\"\nexport * from \"./CategoriesPage.vue?vue&type=script&lang=js\"\n\nimport \"./CategoriesPage.vue?vue&type=style&index=0&id=1b67d29c&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue\\\\crm\\\\5\\\\crm-course\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1b67d29c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","$data","_hoisted_3","_createVNode","_component_base_loader","_hoisted_4","_component_create_category","onCategoryCreated","$options","_createBlock","key","_component_edit_category","categories","onCategoryEdited","onSubmit","_component_base_input","_ctx","name","$errors","length","placehldr","limit","number","_component_base_button","components","BaseInput","data","v$","useVuelidate","validations","required","minValue","methods","async","this","$validate","newCat","cat","$store","dispatch","$reset","$emit","__exports__","_hoisted_7","_hoisted_8","$props","_component_base_select","options","_hoisted_5","onClick","_hoisted_6","props","id","category","updateCount","computed","mutateCategories","forEach","el","push","title","value","watch","loading","editing","e","console","log","CreateCategory","EditCategory","render"],"sourceRoot":""}